# Unity踩坑日记

[TOC]

## PC打包后窗口控制抽风

最近又开始做unity项目了~具体内容暂且不表，在最后打包的时候遇到了一个很神奇的事情，同样的配置下，打包出来的一系列10几个项目打开时有的按照配置的分辨率展示，有的默认全屏，有的以窗口模式拉伸来全屏（当然是在客户的电脑上）···然后就直接十脸懵逼了···再三检查配置，甚至都在GameManager里面直接通过Screen.SetResolution(1280, 960, false);来强制限制分辨率以及禁用全屏，但是在客户机上还是没有卵用···

    经过多方查找资料，找到了问题的原因，客户机之前打开过同名（ProjectName）的项目，并且当时打开时选了不同的分辨率（或全屏）展示，这些都记录在注册表中，哪怕把之前的项目文件删除，但是注册表是不会清除的，所以总结解决方案如下：

* 方案一：在打包的时候直接修改（ProjectName），这样就不会去调用注册表中的配置信息，此方法适用于对项目名称没有严格要求的项目；

* 方案二： 启动exe文件时，按住Alt或者ctrl+shift+b调出控制界面（unity打包默认自动展示，项目需要已经隐藏了），选择想要的分辨率即可；

* 方案三：直接打开注册表（Win+R ——> 在运行中输入“regedit”），找到HKEY_CURRENT_USER\Software\[company name]\[product name]（[company name]是指在unity中设置的开发商名称（默认DefaultCompany），[product name]是指在unity中设置的项目名称），右键删除，之后unity项目就会按照设置的分辨率打开了。

## game视图模型穿插问题

问题是这样的：

![问题表现](https://img-blog.csdn.net/20150828173623533)  

我给出的解决方案是将摄影机的剪切距离设置短一些，摄影机的近切面和远切面的差距不要太大，尤其是近切面在非特殊情况下一般不要设置的太小，比如设置成零。

为什么会近切面和远切面设置过大会产生模型穿插问题，这是因为，模型像素的先后顺序是通过深度测试实现的，而深度缓存的精度有限，通常深度缓存的精度是16位或者32位整数，而如果摄影机的显示深度范围过大，会导致深度缓存的精度不够而造成两个靠得比较近（尤其是离摄影机比较远的地方）的深度判断出错，造成穿插错误或者闪烁，专业上叫做z-fighting，如果是pc端，某些显卡已经支持dx10级别的显卡，它的深度缓存可以是浮点的，一般来说范围就足够大了。也就不容易出现闪烁或者穿插错误的问题